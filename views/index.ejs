<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <title>Issue Tracker</title>
</head>

<body>
    <h1>Ticket Tracker for Demo</h1>
        <section class='jumbotron'>
            <h3>Add new Issue:</h3>
            <form action="/new" method="POST" id="issueInputForm">
                <div class="form-group">
                    <label for="issueSubjInput">Subject</label>
                    <input type="text" class="form-control" id="issueSubjInput" name= 'subject' placeholder="Issue Subject...">
                </div>
                <div class="form-group">
                    <label for="issueDescInput">Description</label>
                    <input type="text" class="form-control" id="issueDescInput" name='description' placeholder="Issue Description...">
                </div>
                <div class="form-group">
                    <label for="issueSeverityInput">Severity</label>
                    <select id="issueSeverityInput" name="severity" class="form-control">
                        <option value="High">High</option>
                        <option value="Medium">Medium</option>
                        <option value="Low" selected>Low</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="issueAssignedToInput">Assigned to</label>
                    <input type="text" class="form-control" id="issueAssignedToInput" name= 'assignedTo' placeholder="Enter Person Responsible...">
                </div>
                <button type="submit" class="btn btn-primary">Add</button>
            </form>
        </section>
        <section class="row">
            <div class="col-lg-12">
                <div id="issuesList">
                    <!-- This will be populated by JS -->
                    <% ticketList.forEach(tickets => { %>
                        <div class = "well">
                            <h6>Issue ID: <%=tickets._id%></h6>
                            <p><span class="label <%= tickets.status == 'Closed' ? 'label-success' : 'label-info' %>"><%=tickets.status%></span></p>
                            <h3><%=tickets.subject%></h3>
                            <p><%=tickets.description%></p>
                            <p><span class="glyphicon glyphicon-time"></span> <%=tickets.severity%>
                            <span class="glyphicon glyphicon-user"> <%=tickets.assignedTo%></span></p>
                            <a href="/edit/<%=tickets._id%>" class="btn btn-warning">Close</a>
                            <a href="/edit/remove/<%=tickets._id%>" class="btn btn-danger">Delete</a>
                        </div>
                    <% }) %>
                </div>
            </div>
        </section>
    </section>
</body>